.task-details-overlay {
    position: fixed;
    inset: 0;
    background-color: $modal-background;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    z-index: 9999;
    overflow-y: auto;
    padding: $spacing-md;
}

.task-details {
    position: relative;
    margin: $navbar-height auto;
    width: min(48rem, 100%);
    background-color: $background-light;
    border-radius: $border-radius;
    box-shadow: $shadow-large;
    display: grid;
    grid-template-rows: auto 1fr;
    grid-template-areas: 
        "header"
        "content";
    font-family: $workspace-font;
    
    &.has-cover {
        .cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: rem(116px);
            background-color: var(--cover-color);
            border-radius: $border-radius $border-radius 0 0;
        }

        .details-header {
            padding-block-start: rem(116px);
        }
    }

    .details-header {
        grid-area: header;
        position: relative;
        padding: $spacing-lg $spacing-lg $spacing-md;
        display: grid;
        grid-template-columns: auto 1fr auto;
        grid-template-areas: 
            "icon title close"
            "... list close";
        gap: $spacing-sm;

        .card-icon {
            grid-area: icon;
            @include details-large-icon;
        }

        .title-container {
            grid-area: title;
            
            h2 {
                font-size: rem(20px);
                line-height: rem(24px);
                font-weight: 600;
                padding: rem(6px) rem(8px);
                width: 100%;
                max-width: rem(660px);
                color: $text-primary;
                cursor: pointer;
                border-radius: $border-radius-small;
                margin: rem(-6px) rem(-8px);

                &:hover {
                    background-color: $background-light-hover;
                }
            }

            .title-input {
                font-size: rem(20px);
                line-height: rem(24px);
                font-weight: 600;
                padding: rem(6px) rem(8px);
                width: 100%;
                max-width: rem(660px);
                color: $text-primary;
                resize: none;
                overflow: hidden;
                font-family: inherit;
                border: 2px solid $primary-blue;
                border-radius: $border-radius-small;
                margin: rem(-6px) rem(-8px);
                background-color: $background-light;

                &:focus {
                    outline: none;
                    box-shadow: $input-shadow;
                }
            }
        }

        .list-info {
            grid-area: list;
            display: flex;
            align-items: center;
            gap: $spacing-sm;
            color: $text-secondary;
            font-size: rem(14px);
            margin-block-start: $spacing-xs;

            .list-name-btn {
                font-weight: 500;
                padding: $spacing-xs $spacing-sm;
                border-radius: $border-radius-small;
                background-color: #dcdfe4;
                color: $text-secondary;
                transition: $hover-transition;
                
                &:hover {
                    background-color: #bbbec1;
                }
            }
        }

        .close-btn {
            grid-area: close;
            justify-self: end;
            align-self: start;
            width: rem(32px);
            height: rem(32px);
            padding: $spacing-xs;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: $text-secondary;
            transition: $hover-transition;
            background-color: transparent;
            
            &:hover {
                background-color: rgba($background-dark, 0.08);
            }
            
            img {
                width: rem(24px);
                height: rem(24px);
                color: $text-secondary;
            }
        }
    }

    .details-grid {
        grid-area: content;
        display: grid;
        grid-template-columns: minmax(0, 1fr) rem(169px);
        grid-template-areas: "main sidebar";
        gap: $spacing-md;
        padding: $spacing-lg;

        .main-content {
            grid-area: main;
            overflow-y: auto;
            display: grid;
            grid-template-areas:
                "notifications"
                "description"
                "activity";
            gap: $spacing-xl;

            .section-header {
                display: flex;
                align-items: center;
                gap: $spacing-sm;
                margin-block-end: $spacing-sm;

                img {
                    width: rem(16px);
                    height: rem(16px);
                    color: $text-secondary;
                }

                h3 {
                    font-size: rem(16px);
                    font-weight: 600;
                    color: $text-primary;
                    margin: 0;
                }
            }

            .notifications-section {
                grid-area: notifications;

                .watch-btn {
                    display: flex;
                    align-items: center;
                    gap: $spacing-sm;
                    padding: $spacing-sm $spacing-md;
                    background-color: $background-light-hover;
                    border-radius: $border-radius-small;
                    color: $text-primary;
                    font-size: rem(14px);
                    transition: $hover-transition;

                    &:hover {
                        background-color: rgba($background-dark, 0.08);
                    }
                }
            }

            .description-section {
                grid-area: description;

                .description-content {
                    padding: $spacing-md;
                    border-radius: $border-radius-small;
                    min-height: rem(100px);
                    cursor: pointer;
                    background-color: #e3e6ea;
                    color: $text-primary;
                    font-size: rem(14px);
                    transition: $hover-transition;
                    
                    &:hover {
                        background-color: #dcdfe4;
                    }

                    &.empty {
                        color: $text-secondary;
                        min-height: rem(60px);
                    }
                }

                .description-textarea {
                    width: 100%;
                    min-height: rem(100px);
                    padding: $spacing-md;
                    border: 2px solid $primary-blue;
                    border-radius: $border-radius-small;
                    background-color: $background-light;
                    resize: vertical;
                    font-family: inherit;
                    font-size: rem(14px);
                    color: $text-primary;

                    &:focus {
                        outline: none;
                        box-shadow: $input-shadow;
                    }
                }
            }

            .activity-section {
                grid-area: activity;
            }
        }

        .sidebar {
            grid-area: sidebar;
            position: sticky;
            top: $spacing-md;

            section {
                margin-block-end: $spacing-lg;

                h3 {
                    font-size: rem(12px);
                    font-weight: 600;
                    color: $text-secondary;
                    text-transform: uppercase;
                    margin: 0 0 $spacing-sm;
                    letter-spacing: 0.04em;
                }

                .action-buttons {
                    display: flex;
                    flex-direction: column;
                    gap: $spacing-xs;

                    button {
                        display: flex;
                        align-items: center;
                        gap: $spacing-sm;
                        width: 100%;
                        padding: $spacing-sm;
                        background-color: rgba($background-dark, 0.04);
                        border-radius: $border-radius-small;
                        color: $text-primary;
                        font-size: rem(14px);
                        font-weight: 400;
                        text-align: left;
                        transition: $hover-transition;

                        &:hover {
                            background-color: $details-btn-txt-hover;
                        }

                        img {
                            width: rem(16px);
                            height: rem(16px);
                            color: $text-secondary;
                        }
                    }
                }
            }
        }
    }
}